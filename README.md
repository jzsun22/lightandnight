# 光夜小工具
使用 Vue CLI 构建，组件库为 Vant 3。玩家为爱发电产物，非官方且与任何玩家组织无关。不能保证后续更新。

## 活动提醒
除了周期性的「星座研究」与「织梦迷境」信息是程序根据当前日期生成的（见 `@/views/Home.vue`）之外，其余活动信息都保存在 `@/assets/data/event.json` 中，需要实时更新。

### `event.json` 数据结构
键名 | 说明 | 类型 | 备注
----|----|----|----
name | 活动名 | `string` |
start | 开始时间 | `string` |
end | 结束时间 | `string` | 因活动结束常伴随着停服维护，不写 `04:59`

## 信使花园模拟器
模拟器使用的数据保存在 `@/assets/data/card.json` 中。

### `card.json` 数据结构
#### cards
每张灵犀以数组 `Array<number, string>` 的形式存放在其星级数组中。灵犀数组的第一个成员为男主在 characters 数组中的下标，第二个成员为灵犀名称。

星级数组中，各灵犀按游戏内**信使花园中**实装时间顺序排序；如果同时加入信使花园，则按照男主下标增序排序。没有出现在信使花园中的灵犀不会加入；如果后续更新时这些灵犀加入了信使花园，那么它们将被置于数组末尾。

灵犀以它在星级数组中的下标作为索引，因此勿轻易删除已有数据或者改变其顺序。

#### common
因为每个限定卡池在游戏中出现时，常驻卡池的内容或有所不同，故将常驻卡池「浮世同行」的有关数据存放于此。每个卡池对象具有以下结构：

键名 | 说明 | 类型 | 备注
----|----|----|----
common | 数组下标 | `number` | 为了统一限定卡池和常驻卡池的实现，记录自身的索引
name | 名称 | `string` | 间隔号使用「・」（`\u30fb`）
desc | 时间 | `string` |
detail | 详情 | `string` | 虽然格式一样理应用程序生成，但是暂时没写，后续有可能改动
3, 4, 5, 6 | 卡池内容 | `Array<number>` | 数组成员为对应灵犀的索引

##### 关于卡池命名
游戏中实际不存在卡池名称差异，但为了区分不同时期的限定池而自行拟定。

目前只有主线灵犀会加入常驻卡池。按照以往规律，主线每次以资料片的形式更新，加入 2 章剧情、2 章邂逅和 6 张灵犀，这 6 张灵犀将分为三组分别加入常驻卡池中，自拟的卡池命名就以加入的灵犀所属分组为依据：

* 两张 4 星，分别是 2 章剧情的其中一个结局。主线更新时不加入卡池而以肝活形式出现，后续维护中一起加入常驻卡池。以资料片的名称命名。
* 一张 5 星 + 一张 6 星，其中 5 星对应 1 章邂逅，6 星是 1 章剧情的其中一个结局。主线更新时以限时卡池的形式出现，卡池复刻的下一次限定卡池时加入常驻卡池。以 6 星灵犀对应的章节名称命名。
* 一张 5 星 + 一张 6 星，同上。

#### limited
因为数目较多，限定卡池目前按照年份分类，各卡池在年份数组中按实装顺序排序。每个卡池对象具有以下结构：

键名 | 说明 | 类型 | 备注
----|----|----|----
name | 名称 | `string` | 间隔号使用「・」（`\u30fb`），斜杠前后加入空格
desc | 时间 | `string` |
detail | 详情 | `string` | 卡池详情的基础部分由程序生成，个别卡池的特殊机制记录在此处。虽然格式一样理应用程序生成，但是暂时没写，后续有可能改动
common | 常驻卡池索引 | `number` |
up | 享受概率 UP 的灵犀 | `Object` | 数组成员为对应灵犀的索引
addcommon | 在卡池中可以抽到，但不享受概率 UP、也不在常驻卡池中的灵犀 | `Object` | 数组成员为对应灵犀的索引
inherit | 可继承该池水位的卡池 | `string` |
p | UP 概率 | `number` | 单位为 %，不写默认为 `50`
