# 光夜小工具
使用 Vue CLI 构建，组件库为 Vant 3。玩家为爱发电产物，非官方且与任何玩家组织无关。不能保证后续更新。

## 注意
工具中的文本总是遵循以下风格，即使与官方不一致。

* 间隔号总是使用「・」（`\u30fb`）。
* 除了日期中的斜杠（如 `22/05/21`）之外，斜杠总是在左右添加空格（如 `与罪同行 / 归途`）。

## `events.json` 数据结构
「活动提醒」功能需要的活动信息保存在 `@/assets/data/events.json` 中。

键名 | 说明 | 类型 | 备注
----|----|----|----
name | 类型名称 | `string` |
events | 类型包含的活动 | `Array<Object>` |

键名 | 说明 | 类型 | 备注
----|----|----|----
name | 活动名称 | `string` |
start | 活动开始时间 | `string` |
end | 活动结束时间 | `string` | 因为活动结束常常伴随停服维护，结束时间按 00:00 而非 04:59 计
periodic | 是否为周期活动 | `boolean` | 不写默认为 `false`
state | 周期活动中，需要提醒的是开始时间还是结束时间 | `string` | `始` 或 `止`
day | 周期活动中，需要提醒的时刻是一周中的第几天 | `number` | 星期天为 `0`

## `cards.json` 数据结构
「信使花园模拟器」功能使用的数据保存在 `@/assets/data/cards.json` 中。

### cards
每张灵犀以数组 `Array<number, string>` 的形式存放在其星级数组中。灵犀数组的第一个成员为男主在 characters 数组中的下标，第二个成员为灵犀名称。

星级数组中，各灵犀按游戏内**信使花园中**实装时间顺序排序；如果同时加入信使花园，则按照男主下标增序排序。没有出现在信使花园中的灵犀不会加入；如果后续更新时这些灵犀加入了信使花园，那么它们将被置于数组末尾。

灵犀以它在星级数组中的下标作为索引，因此勿轻易删除已有数据或者改变其顺序。

### common
因为每个限定卡池在游戏中出现时，常驻卡池的内容或有所不同，故将常驻卡池「浮世同行」的有关数据存放于此。每个卡池对象具有以下结构：

键名 | 说明 | 类型 | 备注
----|----|----|----
name | 名称 | `string` | 详见下文
desc | 时间 | `string` |
detail | 详情 | `string` |
common | 数组下标 | `number` | 为了统一限定卡池和常驻卡池的实现，记录自身的索引
3, 4, 5, 6 | 卡池内容 | `Array<number>` |
add | 卡池新增内容 | `Array<number>` |

#### 关于卡池命名
游戏中实际不存在卡池名称差异，但为了区分不同时期的限定池而自行拟定。

目前只有主线灵犀会加入常驻卡池。按照以往规律，主线每次以资料片的形式更新，加入 2 章剧情、2 章邂逅和 6 张灵犀，这 6 张灵犀将分为三组分别加入常驻卡池中，自拟的卡池命名就以加入的灵犀所属分组为依据：

* 两张 4 星，分别是 2 章剧情的其中一个结局。主线更新时不加入卡池而以肝活形式出现，后续维护中一起加入常驻卡池。以资料片的名称命名。
* 一张 5 星 + 一张 6 星，其中 5 星对应 1 章邂逅，6 星是 1 章剧情的其中一个结局。主线更新时以限时卡池的形式出现，卡池复刻的下一次限定卡池时加入常驻卡池。以 6 星灵犀对应的章节名称命名。
* 一张 5 星 + 一张 6 星，同上。

### limited
因为数目较多，限定卡池目前按照年份分类，各卡池在年份数组中按实装顺序排序。每个卡池对象具有以下结构：

键名 | 说明 | 类型 | 备注
----|----|----|----
name | 名称 | `string` |
desc | 时间 | `string` |
detail | 详情 | `string` |
common | 常驻卡池索引 | `number` |
up | 享受概率 UP 的灵犀 | `Object` |
addCommon | 加入卡池，但不享受概率 UP 的灵犀 | `Object` |
inherit | 继承该池水位的卡池 | `string` | 不写默认为水位不继承
p | UP 概率 | `number` | 单位为 %，不写默认为 `50`
noShop | 是否能使用书简兑换限定灵犀 | `boolean` | 不写默认为 `false`
limitedLetter | 限定书简的名称 | `string` | 不写默认为不使用限定书简
price | 使用书简兑换限定灵犀的价格 | `Object` | 不写默认为 5 星 `80`、6 星 `180`
maxbuy | 使用书简兑换限定灵犀的最多次数 | `number` | 不写默认为 `1`
pickPrice | 使用书简兑换自选限定灵犀的价格 | `number` | 不写默认为不能兑换
pickTime | 赠送自选限定灵犀的抽数 | `number` | 不写默认为不赠送
randomTime | 赠送随机限定灵犀的抽数 | `number` | 不写默认为不赠送
